# `axy/html-build`

Несколько простейших хелперов для формирования HTML-элементов.
Все они собраны в виде статических методов класса `axy\html\build\HTMLBuilder`.
Никакой проверки на корректность тегов и атрибутов не производится, просто формируется код по полученным данным.

#### `escape(string $text): string`

Экранирует HTML-код в строке.
Аналог `htmlspecialchars()`.

#### `style(array $styles [, bool $escape = true]): string`

Формирует значение для атрибута `style` из массива с css-пропертями.

```php
$styles = [
    'color' => 'red',
    'border' => '1px solid black',
    'font-weight' => null,
];
echo HTMLBuilder::style($styles);
```

Результат:

```
color:red;border:1px solid black
```

Значения `NULL` не выводятся, все остальные приводятся к строкам.

Второй аргумент метода по умолчанию `TRUE` - получившаяся строка экранируется и её можно сразу вставлять в HTML.

#### `attributes(array $attrs[, string $prefix = ' ']): string`

Получает на вход массив с описанием атрибутов некоего тега.
Возвращает их в виде одной строки.

```php
$attrs = [
    'id' => 'my-id',
    'class' => ['one', 'two'],
    'style' => [
        'color' => 'green',
    ],
];

echo '<div'.HTMLBuilder::attributes($attrs).'>';
```

Результат:

```html
<div id="my-id" class="one two" style="color:green">
```

В массиве `$attrs` ключи - имена атрибутов, значения же могут быть следующих типов:

* Строка - выводится как есть (с экранированием)
* Число - выводится как строка
* Порядковый массив (проверятеся по наличию индекса 0) - список строк, выводимых через пробел, 
например, для атрибута `class` - список классов.
* Ассоциативный массив - обрабатывается, как `style` (см. выше)
* boolean - атрибут-флаг
    * `TRUE` - включён, в качестве значения используется имя атрибута - `selected="selected"`
    * `FALSE` - отключён - атрибут вообще не выводится
* NULL - атрибут не выводится (в отличии от пустой строки и 0).

Если в итоге получается не пустая строка, то впереди добавляется атрибут `$prefix`.
По умолчанию - пробел, чтобы можно было сразу вставить в тег без лишних пробелов.

#### `tag(string $name [, array|string $attrs = null, bool $single = false]): string`

Возвращает открывающий тег.

```php
echo HTMLBuilder::tag('br', null, true); // <br />
```

* `name` - имя тега (корректность и регистр не проверяется)
* `attrs` - атрибуты тега
    * array - обрабатывается методом `attributes()`
    * string - выводится как есть
    * NULL - атрибутов нет
* `single` - указание, что это одиночный тег, который должен быть закрыт с помощью `/>`

#### `element(string $name[, array|string $attrs = null, array|string $content = null]): string`

```php
echo HTMLBuilder::element('p', ['class' => 'x'], 'text'); // <p class="x">text</p>
```

Выводит HTML-элемент: открывающий и закрывающий теги и контент между ними.

* `$name` - имя объемлющего тега
* `$attrs` - атрибуты (формат см. в `tag()`)
* `$content` - содержимое:
    * `NULL` - это одиночный тег
    * Строка - выводится с экранированием (пустая строка, в отличии от `NULL`, не делает тег одиночным)
    * Число и другие скаляры - приводятся к строке
    * Массив
        * Если есть элемент с ключём `html` - он выводится без экранирования
        * Если есть ключ `name` - вложенный HTML-элемент, обрабатывается методом `element()`.
        Необязательные ключи - `attrs` и `single`.
    * В остальных случаях - рекурсивно обходятся все элементы массива и результаты последовательно сшиваются 
    без каких-либо разделителей.

#### `select(string|array|null $attrs, array $options, $current = null [, string $none = null]): string`

Формирует элемент `<select>`.

```php
$name = 'month';
$current = (int)date('m');
$options = [
    1 => 'January',
    2 => 'February',
    // ...
];
echo HTMLBuilder::select(['name' => $name], $options, $current, 'Select, please');
```

* `$attrs` - атрибуты открывающего тега (например, `name` для формы)
* `$options` - массив вариантов (ключ - атрибут value для `<option>`, значение - отображаемый текст)
* `$current` - ключ изначально выбранного элемента (`NULL` - ничего не выбрано)
* `$none` - текст о том, что ничего не выбрано. Когда `$current=NULL` и здесь что-то есть, то в начало списка 
добавляется и выбирается элемент с этим текстом и пустой строкой в качестве значения.
